function openChatWindow(companyId, productId, productTitle, companyName) {
    var chatWindow = window.open('', '_blank', 'width=450,height=600,scrollbars=yes,resizable=yes');
    var chatHtml = '<html><head><title>Chat - ' + companyName + '</title><style>body{font-family:Arial,sans-serif;margin:0;padding:20px;background:#f5f5f5}.chat-container{background:white;border-radius:10px;height:500px;display:flex;flex-direction:column}.chat-header{padding:15px;border-bottom:1px solid #ddd;background:#007bff;color:white;border-radius:10px 10px 0 0}.chat-messages{flex:1;padding:15px;overflow-y:auto}.message{margin:10px 0;padding:10px;border-radius:8px}.company-msg{background:#f0f0f0}.user-msg{background:#e3f2fd;text-align:right}.chat-input{padding:15px;border-top:1px solid #ddd;display:flex;gap:10px}input{flex:1;padding:8px;border:1px solid #ddd;border-radius:5px}button{padding:8px 15px;background:#007bff;color:white;border:none;border-radius:5px;cursor:pointer}.close-btn{background:#dc3545}</style></head><body><div class="chat-container"><div class="chat-header"><h3>ðŸ’¬ Chat with ' + companyName + '</h3><small>Product: ' + productTitle + '</small></div><div class="chat-messages" id="messages"><div class="message company-msg"><strong>' + companyName + ':</strong> Hello! Thank you for your interest in "' + productTitle + '". How can we help you?</div></div><div class="chat-input"><input type="text" id="messageInput" placeholder="Type your message..." onkeypress="if(event.key===\'Enter\')sendMessage()"><button onclick="sendMessage()">Send</button><button class="close-btn" onclick="window.close()">Close</button></div></div><script>function sendMessage(){var input=document.getElementById("messageInput");var message=input.value.trim();if(!message)return;var messagesDiv=document.getElementById("messages");messagesDiv.innerHTML+="<div class=\\"message user-msg\\"><strong>You:</strong> "+message+"</div>";input.value="";messagesDiv.scrollTop=messagesDiv.scrollHeight;setTimeout(function(){var replies=["Thank you for your message! We will get back to you soon.","We can provide more details about this product.","Would you like to schedule a meeting?","Our sales team will contact you within 24 hours.","Is there anything specific you would like to know?"];var reply=replies[Math.floor(Math.random()*replies.length)];messagesDiv.innerHTML+="<div class=\\"message company-msg\\"><strong>' + companyName + ':</strong> "+reply+"</div>";messagesDiv.scrollTop=messagesDiv.scrollHeight},1000)}</script></body></html>';
    chatWindow.document.write(chatHtml);
}